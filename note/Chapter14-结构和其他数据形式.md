# 第14章 结构和其他数据形式

## 14.6 指向结构的指针

Q：使用指向结构的指针的优势是什么？

A：

1）指向结构的指针通常比结构本身更容易操控；

2）以指向结构的指针作为函数参数比直接使用结构作为函数参数效率更高；

3）一些用于表示数据的结构中包含指向其他结构的指针。

### 14.6.1 声明和初始化结构指针

Q：如何声明结构指针？

A：语法和其他指针声明一样，具体见课本吧。

Q：结构指针赋值的语法是什么样的？

A：和数组不同的是，结构名并不是结构的地址，因此要在结构名前面加上&运算符。

### 14.6.2 用指针访问成员

Q：指向结构的指针是如何访问成员变量的？

A：有2种方法，最常用的是使用->运算符，而结构体使用.进行访问的，所以在实践写代码中是注意我们操作的对象是指向结构的指针还是结构。

## 14.7 向函数传递结构的信息

说明：程序员可以选择传递结构本身，也可以传递指向结构的指针，如果只是关心结构中的某一部分，也可以把结构的成员作为参数。以下3个小节，就是展示了这3种函数传参的方法。

### 14.7.1 传递结构成员

### 14.7.2 传递结构的地址

### 14.7.3 传递结构

### 14.7.4 其他结构特征

结论：现在的C允许把一个结构赋值给另一个结构（即使成员是数组，也能完成赋值），但是数组不能这样做。

说明：本小节有2段代码，由于涉及到字符串的内容，对于这部分内容，我目前几何用不到也不是很熟悉，所以没有去深入理解这2段代码，暂时先放着把。

### 14.7.5 结构和结构指针的选择

Q：假设要编写一个与机构相关的函数，是用结构指针作为参数，还是用结构作为参数和返回值？

A：二者各有优缺点。

1）把指针作为参数的优点是效率高，缺点是无法保护数据；

2）结构作为参数传递的优点是，函数处理的是原始数据的副本，这保护了原始数据。另外，代码风格也更清楚。缺点是浪费时间和存储空间。

Q：如何解决传递指针无法保护数据的问题？

A：使用`const`限定符，具体见程序清单14.8。